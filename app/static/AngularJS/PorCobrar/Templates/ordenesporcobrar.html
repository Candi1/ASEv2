<link href="Libraries/css/sweetalert/sweetalert.css" rel="stylesheet">
<link rel="stylesheet" href="AngularJS/Orden/Styles/trabajo.css">
<link rel="stylesheet" href="AngularJS/PorCobrar/Styles/cobrar.css">

<div ng-init="init()" class="animated bounceInRight" cg-busy="{promise:promise,message:message, minDuration: minDuration,delay:delay}">
    <div class="headTitleTallerCita">
        <span class="title">Cobranza</span>
    </div>
    <div class="wrapper wrapper-content animated fadeInRight">
        <div class="row">
            <div class="col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-content">
                        <tabset>
                            <tab heading="Ordenes Por Cobrar" index="0">
                                <div class="contenedorFiltros">
                                    <div class="col-lg-12">
                                        <div class="ibox collapsed">
                                            <div class="ibox-title">
                                                <h5>Example of initial collapsed panel</h5>
                                                <div class="ibox-tools">
                                                    <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                                                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <i class="fa fa-wrench"></i>
                            </a>
                                                    <ul class="dropdown-menu dropdown-user">
                                                        <li><a href="#">Config option 1</a>
                                                        </li>
                                                        <li><a href="#">Config option 2</a>
                                                        </li>
                                                    </ul>
                                                    <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                                                </div>
                                            </div>
                                            <div class="ibox-content" style="display: none;">

                                                <p>
                                                    Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus
                                                    mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis,
                                                    sem. Nulla consequat massa quis enim. </p>
                                                <p>
                                                    Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae,
                                                    justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt.
                                                    Cras dapibus. Vivamus elementum semper nisi.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="contenedorFiltros">
                                    <div class="panel">
                                        <div class="panel-heading">
                                            Filtros de búsqueda </div>
                                        <div class="panel-body">
                                            <div class="row  col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                <div class="form-group col-xs-12 col-sm-6 col-md-3 col-lg-3">
                                                    <label class="form-label text-main">Zona:</label>
                                                    <select class="form-control" ng-model="zona" ng-options="empresa.emp_nombre for empresa in empresaUsuario track by empresa.emp_nombre"
                                                        name="txtTipoContrato" ng-change="" ng-disabled="">
                                                        <option value="">Seleccioné Zona</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                <div class="form-group col-xs-12 col-sm-6 col-md-3 col-lg-3">
                                                    <label for="fInicio" class="text-main">Mes:</label>
                                                    <div class="form-input">
                                                        <input type="text" class="form-control" ng-model="citas.mes" ng-change="">
                                                    </div>
                                                </div>
                                                <div class="form-group col-xs-12 col-sm-6 col-md-3 col-lg-3" id="calendario">
                                                    <label class="form-label text-main">Rango de:</label>
                                                    <div class="form-group" id="calendar">
                                                        <div class="input-group date">
                                                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                            <input type="text" class="form-control" ng-model="citas.fechaInicio" ng-change="">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group col-xs-12 col-sm-6 col-md-3 col-lg-3" id="calendario">
                                                    <label class="form-label text-main">a:</label>
                                                    <div class="form-group" id="calendar">
                                                        <div class="input-group date">
                                                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                            <input type="text" class="form-control" ng-model="citas.fechaFin" ng-change="">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group col-xs-12 col-sm-6 col-md-3 col-lg-3" id="calendario">
                                                    <label class="form-label text-main">Fecha:</label>
                                                    <div class="form-group" id="calendar">
                                                        <div class="input-group date">
                                                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                            <input type="text" class="form-control" ng-model="citas.fecha" ng-change="">
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="form-group col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                                    <label class="form-label text-main">Ejecutivo:</label>
                                                    <select class="form-control" ng-model="zona" ng-options="empresa.emp_nombre for empresa in empresaUsuario track by empresa.emp_nombre"
                                                        name="txtTipoContrato" ng-change="" ng-disabled="">
                                                        <option value="">Seleccioné Ejecutivo</option>
                                                    </select>
                                                </div>
                                                <div class="form-group col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                                    <button class="btn btn-primary pull-right" ng-click="seleccionarTodo(citas)" ng-disabled=""><i class="ti-search"></i> Buscar</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row sumatorias">
                                    <div class="col-xs-3 pull-right">
                                        <div>
                                            <!--{{sumatoriaOrdenes| currency: "$"}}-->
                                            <h2 class="no-margins">$ 2,346.00</h2>
                                            <small>precio venta s/iva</small>
                                            <div class="stat-percent">18% </div>
                                            <div class="progress progress-mini">
                                                <div style="width: 48%;" class="progress-bar"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="table-responsive contenedorTabla">
                                    <table class="table table-striped table-bordered table-hover dataTablePorCobrar">
                                        <thead>
                                            <tr>
                                                <th>Cliente</th>
                                                <th>Consecutivo</th>
                                                <th>Número de Órden</th>
                                                <th>Cotización</th>
                                                <th>Número Económico</th>
                                                <th>Placas</th>
                                                <th>Proveedor</th>
                                                <!--ZONAS DINÁMICAS-->
                                                <th>Tipo Orden</th>
                                                <th>Centro de Trabajo</th>
                                                <th>Provisión</th>
                                                <th>Venta sin IVA</th>
                                                <th>Estatus</th>
                                                <th>Acción</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="orden in porCobrar">
                                                <td>{{orden.cliente}}</td>
                                                <td>{{orden.consecutivo}}</td>
                                                <td>{{orden.numeroOrden}}</td>
                                                <td>{{orden.numeroCotizacion}}</td>
                                                <td>{{orden.economico}}</td>
                                                <td>{{orden.placas}}</td>
                                                <td>{{orden.proveedor}}</td>
                                                <td>{{orden.tipoOrden}}</td>
                                                <td>{{orden.centroTrabajo}}</td>
                                                <td>{{orden.provision}}</td>
                                                <td>{{orden.ventasiniva | currency}}</td>
                                                <td>{{orden.estatus }}</td>
                                                <td>
                                                    <div class="alerta">
                                                        <button class="dropdown-toggle alerta-form btn btn-info" tooltip="Ver órden de servicio" data-toggle="dropdown" href="#"
                                                            aria-expanded="true" ng-click="aprobarTrabajo(ordenverificada, 1)">
                                                        <i class="glyphicon glyphicon-sunglasses"></i> 
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </tab>
                            <tab heading="Cargar Orden de Pago" index="1">

                                <div class=" row etiquetaTotales">Precio total: <span class="totales">{{sumatoriaCOPADE| currency: "$"}}</span></div>
                                <br/>
                                <div>
                                    <br>
                                    <div class="ibox-content" ng-show="fechaRecepcionCopade==''">
                                        <div class="alert alert-danger">
                                            <strong>Seleccione una FECHA, </strong> para poder subir COPADE.
                                        </div>
                                    </div>
                                    {{fechaRecepcionCopade}}&nbsp;&nbsp;
                                    <button class="btn btn-success" type="button" ng-click="fechaRecepcibeCopade()" data-toggle="tooltip" tooltip="Fecha de Recepcion COPADE"
                                        tooltip-placement="up"><span class="glyphicon glyphicon-calendar"></span>&nbsp;Fecha de Recepcion COPADE</button>&nbsp;&nbsp;
                                    <button class="btn btn-primary" type="button" id="btnEnviar" data-toggle="tooltip" tooltip="Cargar COPADE" tooltip-placement="right"
                                        ng-click="subir(orden.idTrabajo)" ng-disabled="fechaRecepcionCopade==''">
                                        <span class="fa fa-paperclip" aria-hidden="true" data-toggle="modal">&nbsp;Cargar COPADE</span>
                                    </button>&nbsp;&nbsp;&nbsp;
                                    <br>
                                    <br>
                                    <div class="table-responsive">
                                        <table class="table table-striped table-bordered table-hover dataTableCopades">
                                            <thead>
                                                <tr>
                                                    <!--th>Cliente</th-->
                                                    <th>Número Copade</th>
                                                    <th>Órden de Surtimiento</th>
                                                    <th>No. Estimación</th>
                                                    <th>Precio venta sin IVA</th>
                                                    <th>Precio venta con IVA</th>
                                                    <th>Fecha Carga de ASE</th>
                                                    <th>Fecha Llegada Copade</th>
                                                    <th>Acción</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="copade in copades">
                                                    <!--td>{{copade.cliente}}</td-->
                                                    <td>{{copade.numeroCopade}}</td>
                                                    <td>{{copade.ordenSurtimiento}}</td>
                                                    <td>{{copade.numeroEstimacion}}</td>
                                                    <td>{{copade.subTotal | currency}}</td>
                                                    <td>{{copade.total | currency}}</td>
                                                    <td>{{copade.fechaCarga | date:'dd-MM-yyyy HH:mm'}}</td>
                                                    <td>{{copade.fechaRecepcionCopade}}</td>
                                                    <td>
                                                        <button class="btn btn-primary" type="button" ng-click="buscaCoincidencia(copade.idDatosCopade)" data-toggle="tooltip" tooltip="Buscar coincidencias"
                                                            tooltip-placement="left"><span class="glyphicon glyphicon-search"></span></button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </tab>
                            <tab heading="PreFactura Generada" index="2">
                                <div class=" row etiquetaTotales">Precio total: <span class="totales"> {{sumatoriaPrefactura| currency: "$"}}</span></div>
                                <br/>
                                <br/>
                                <br/>
                                <br/>
                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered table-hover dataTablePreFacturas">
                                        <thead>
                                            <tr>
                                                <!--th>Consecutivo</th>
                                                <th>Número de la Orden</th>
                                                <th>Número Económico</th>
                                                <th>Zona</th>
                                                <th>TAR</th>
                                                <th>Taller</th>
                                                <th>Tipo Orden</th-->
                                                <th>Cliente</th>
                                                <th>No. COPADE</th>
                                                <th>Orden de Surtimiento</th>
                                                <th>No. Estimación</th>
                                                <th>Descripción de la Orden</th>
                                                <th>Precio venta sin IVA</th>
                                                <th>Precio venta con IVA</th>
                                                <th>Fecha COPADE</th>
                                                <th ng-show="trabajosporCOPADE==1">Números de Órdenes</th>
                                                <!--th>Estatus</th>
                                                <th>Precio venta sin IVA</th>
                                                <th>Fecha</th> 
                                                <th>Agendó</th-->
                                                <th ng-hide="userData.idTipoUsuario == 4">Acción</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="cita in facturas">
                                                <!--td>{{cita.idCita}}</td>
                                                <td>{{cita.numeroTrabajo}}</td>
                                                <td>{{cita.numEconomico}}</td>
                                                <td>{{cita.zona}}</td>
                                                <td>{{cita.TAR}}</td>
                                                <td>{{cita.razonSocial}}</td>
                                                <td>{{cita.idTipoCita == 4 ? "Refacciones" : "Servicio"}}</td-->
                                                <td>{{cita.cliente}}</td>
                                                <td>{{cita.numeroCopade}}</td>
                                                <td>{{cita.folio}}</td>
                                                <td>{{cita.numeroEstimacion}}</td>
                                                <td>{{cita.descripcion}}</td>
                                                <td>{{cita.subTotal | currency}}</td>
                                                <td>{{cita.total | currency}}</td>
                                                <td>{{cita.fechaRecepcionCopade | date:'dd-MM-yyyy'}}</td>
                                                <td ng-show="trabajosporCOPADE==1">{{cita.numeroTrabajo}}</td>
                                                <!--td>{{cita.estatus}}</td>
                                                <td>{{cita.montoOrden | currency}}</td>
                                                <td>{{cita.fecha | date:'dd-MM-yyyy HH:mm'}}</td>     
                                                <td>{{cita.nombreCompleto}}</td-->
                                                <td ng-hide="userData.idTipoUsuario == 4">
                                                    <button class="btn btn-success" type="button" ng-click="verOrdenes(cita.idDatosCopade)" data-toggle="tooltip" tooltip="Detalle copade"
                                                        tooltip-placement="left"><span class="glyphicon glyphicon-eye-open"></span></button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </tab>

                            <tab heading="Factura Enviada al Cliente" index="3">
                                <div class=" row etiquetaTotales">Precio total: <span class="totales"> {{sumatoriafacturadas| currency: "$"}}</span></div>
                                <br/>
                                <br/>
                                <br/>
                                <br/>
                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered table-hover dataTableFacturados">
                                        <thead>
                                            <tr>
                                                <th>Cliente</th>
                                                <th>No. COPADE</th>
                                                <th>Orden de Surtimiento</th>
                                                <th>No. Estimación</th>
                                                <th>Descripción de la Orden</th>
                                                <th>Precio venta sin IVA</th>
                                                <th>Folio Factura</th>
                                                <th>Precio venta con IVA</th>
                                                <th>Fecha COPADE</th>
                                                <th ng-show="trabajosporCOPADE==1">Números de Órdenes</th>
                                                <th>Acción</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="facturado in facturados">
                                                <td>{{facturado.cliente}}</td>
                                                <td>{{facturado.numeroCopade}}</td>
                                                <td>{{facturado.folio}}</td>
                                                <td>{{facturado.numeroEstimacion}}</td>
                                                <td>{{facturado.descripcion}}</td>
                                                <td>{{facturado.subTotal | currency}}</td>
                                                <td>{{facturado.COP_IDDOCTO}}</td>
                                                <td>{{facturado.total | currency}}</td>
                                                <td>{{facturado.fechaRecepcionCopade | date:'dd-MM-yyyy'}}</td>
                                                <td ng-show="trabajosporCOPADE==1">{{facturado.numeroTrabajo}}</td>
                                                <td ng-hide="userData.idTipoUsuario == 4">
                                                    <button class="btn btn-success" type="button" ng-click="verOrdenes(facturado.idDatosCopade)" data-toggle="tooltip" tooltip="Detalle copade"
                                                        tooltip-placement="left"><span class="glyphicon glyphicon-eye-open"></span></button>

                                                    <button class="btn btn-info" type="button" ng-click="" data-toggle="tooltip" tooltip="Ver Factura" tooltip-placement="left"><span class="glyphicon glyphicon-sunglasses"></span></button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </tab>

                            <tab heading="Facturas Abonadas" index="4">
                                <br/>
                                <br/>
                                <div class="col-md-offset-10 col-md-2">
                                    <form role="form">
                                        <input bs-switch ng-model="isSelected" type="checkbox" switch-active="{{ isActive }}" switch-on-text="{{ onText }}" switch-off-text="{{ offText }}"
                                            switch-on-color="{{ onColor }}" switch-off-color="{{ offColor }}" switch-animate="{{ animate }}"
                                            switch-size="{{ size }}" switch-label="{{ label }}" switch-icon="{{ icon }}" switch-radio-off="{{ radioOff }}"
                                            switch-label-width="{{ labelWidth }}" switch-handle-width="{{ handleWidth }}" switch-wrapper="{{ wrapper }}"
                                            ng-true-value="'yep'" ng-false-value="'nope'" switch-inverse="{{ !inverse }}" ng-change="change_switch()">
                                    </form>
                                </div>

                                <div ng-show="showCopade == 1">


                                    <div class=" row etiquetaTotales">
                                        Precio venta con IVA:
                                        <span class="totales">{{sumatoriaTotal| currency: "$"}}</span> Abono:
                                        <span class="totales">{{sumatoriaAbonos| currency: "$"}}</span> Saldo:
                                        <span class="totales">{{sumatoriaSaldos| currency: "$"}}</span>
                                    </div>
                                    <br/>
                                    <br/>
                                    <br/>
                                    <br/>
                                    <div class="table-responsive">
                                        <table class="table table-striped table-bordered table-hover dataTableAbonos" cg-busy="{ promise:promise,message:message } ">
                                            <thead>
                                                <tr>
                                                    <th>Cliente</th>
                                                    <th>No. COPADE</th>
                                                    <th>Orden de Surtimiento</th>
                                                    <th>No. Estimación</th>
                                                    <th>Descripción de la Orden</th>
                                                    <th>Precio Venta sin IVA</th>
                                                    <th>Folio Factura</th>
                                                    <th>Precio Venta con IVA</th>
                                                    <th>Abono</th>
                                                    <th>Saldo</th>
                                                    <th>Fecha Último Pago</th>
                                                    <th>Fecha COPADE</th>
                                                    <th ng-show="trabajosporCOPADE==1">Números de Órdenes</th>
                                                    <th>Acción</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="abono in abonos">
                                                    <td>{{abono.cliente}}</td>
                                                    <td>{{abono.numeroCopade}}</td>
                                                    <td>{{abono.folio}}</td>
                                                    <td>{{abono.numeroEstimacion}}</td>
                                                    <td>{{abono.descripcion}}</td>
                                                    <td>{{abono.subTotal | currency}}</td>
                                                    <td>{{abono.COP_IDDOCTO}}</td>
                                                    <td>{{abono.total | currency}}</td>
                                                    <td>{{abono.abono | currency}}</td>
                                                    <td>{{abono.COP_SALDO | currency}}</td>
                                                    <td>{{abono.COP_FECHULTPAG | date:'dd-MM-yyyy HH:mm'}}</td>
                                                    <td>{{abono.fechaRecepcionCopade | date:'dd-MM-yyyy'}}</td>
                                                    <td ng-show="trabajosporCOPADE==1">{{abono.numeroTrabajo}}</td>
                                                    <td ng-hide="userData.idTipoUsuario == 4">
                                                        <!--button class="btn btn-success" type="button" ng-click="verOrdenes(abono.idDatosCopade)" data-toggle="tooltip" tooltip="Detalle copade" tooltip-placement="left"><span class="glyphicon glyphicon-eye-open"></span></button-->

                                                        <button class="btn btn-info" type="button" ng-click="verOrdenes(abono.idDatosCopade)" data-toggle="tooltip" tooltip="Ver Factura"
                                                            tooltip-placement="left"><span class="glyphicon glyphicon-sunglasses"></span></button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>

                                <div ng-show="showCopade == 2">

                                    <div class=" row etiquetaTotales">Precio Cotización con IVA: <span class="totales"> {{sumatoriaCotizaciones| currency: "$"}}</span></div>
                                    <br/>
                                    <br/>
                                    <br/>
                                    <br/>
                                    <div class="row col-md-12 ">

                                        <div class="col-md-5 form-group">
                                            <label class="col-sm-3 control-label">Taller </label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" value="" ng-model="proveedor" ng-enter="cotizacionesAbonos(fecIniCot, fecFinCot, proveedor)">
                                                <!--select class="form-control" name="tipo" ng-model="selectedTipo" ng-options="tipo.nombre for tipo in tipos" >
                                                    <option value=''>Selecionar  tipo</option><!--default option -->
                                                <!--/select-->
                                            </div>
                                        </div>


                                        <div class="col-md-6" id="data_5">
                                            <label class="col-sm-4 control-label">Fecha Último  Pago </label>
                                            <div class="input-daterange input-group" id="datepicker">
                                                <input type="text" placeholder="Fecha Inicio" class="input-sm form-control" name="start" ng-model="fecIniCot" calendar/>
                                                <span class="input-group-addon">a</span>
                                                <input type="text" placeholder="Fecha Fin" class="input-sm form-control" name="end" ng-model="fecFinCot" calendar/>
                                            </div>

                                        </div>

                                        <div class="col-md-1">
                                            <button id="btnBuscar" busy="Buscando.." type="button" class="btn btn-primary" ng-click="cotizacionesAbonos(fecIniCot, fecFinCot, proveedor)"><span class="glyphicon glyphicon-search"></span></button>
                                        </div>

                                    </div>
                                    <div class="table-responsive row col-md-12 ">
                                        <table class="table table-striped table-bordered table-hover dataTableCotAbonos" cg-busy="{promise:promise,message:message, minDuration: minDuration,delay:delay}">
                                            <thead>
                                                <tr>
                                                    <th>Cliente</th>
                                                    <th>No. COPADE</th>
                                                    <th>Orden de Surtimiento</th>
                                                    <th>Consecutivo</th>
                                                    <th>Número de la Orden</th>
                                                    <th>Número de Cotización</th>
                                                    <th>Taller</th>
                                                    <th>Factura Taller</th>
                                                    <th>Monto Factura Taller</th>
                                                    <th>Saldo Factura Taller</th>
                                                    <th>Número Económico</th>
                                                    <th>Zona</th>
                                                    <th>TAR</th>
                                                    <th>Tipo Orden</th>
                                                    <th>Descripción de la Orden</th>
                                                    <th>Precio Cotización con IVA</th>
                                                    <th>Factura COPADE</th>
                                                    <th>Precio Copade con IVA</th>
                                                    <th>Abono COPADE</th>
                                                    <th>Saldo COPADE</th>
                                                    <th>Fecha Último Pago</th>
                                                    <th>Fecha Ingreso Unidad</th>
                                                    <th>Fecha Inicio Trabajo</th>
                                                    <th>Fecha Fin Trabajo</th>
                                                    <th>Acción</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="cotizacion in cotizaciones">
                                                    <td>{{cotizacion.cliente}}</td>
                                                    <td>{{cotizacion.numeroCopade}}</td>
                                                    <td>{{cotizacion.folio}}</td>
                                                    <td>{{cotizacion.idCita}}</td>
                                                    <td>{{cotizacion.numeroTrabajo}}</td>
                                                    <td>{{cotizacion.numeroCotizacion}}</td>
                                                    <td>{{cotizacion.razonSocial}}</td>
                                                    <td>{{cotizacion.numFactura}}</td>
                                                    <td>{{cotizacion.total | currency}}</td>
                                                    <td>{{cotizacion.saldoProveedor | currency}}</td>
                                                    <td>{{cotizacion.numEconomico}}</td>
                                                    <td>{{cotizacion.zona}}</td>
                                                    <td>{{cotizacion.TAR}}</td>
                                                    <td>{{cotizacion.idTipoCita == 4 ? "Refacciones" : "Servicio"}}</td>
                                                    <td>{{cotizacion.trabajo}}</td>
                                                    <td>{{cotizacion.precioCotizacion | currency}}</td>
                                                    <td>{{cotizacion.COP_IDDOCTO}}</td>
                                                    <td>{{cotizacion.COP_CARGO | currency}}</td>
                                                    <td>{{cotizacion.abono | currency}}</td>
                                                    <td>{{cotizacion.COP_SALDO | currency}}</td>
                                                    <td>{{cotizacion.COP_FECHULTPAG | date:'dd-MM-yyyy HH:mm'}}</td>
                                                    <td>{{cotizacion.fechaIngresoUnidad | date:'dd-MM-yyyy HH:mm'}}</td>
                                                    <td>{{cotizacion.fechaInicio | date:'dd-MM-yyyy HH:mm'}}</td>
                                                    <td>{{cotizacion.fechaFin | date:'dd-MM-yyyy HH:mm'}}</td>
                                                    <td>

                                                        <div class="alerta">
                                                            <button class="dropdown-toggle alerta-form btn btn-info" tooltip="Ver órden de servicio" data-toggle="dropdown" href="#"
                                                                aria-expanded="true" ng-click="aprobarTrabajo(cotizacion, 1)">
                                                        <i class="glyphicon glyphicon-sunglasses"></i> 
                                                        </button>
                                                            <ul class="dropdown-menu dropdown-messages">
                                                            </ul>
                                                        </div>

                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>


                            </tab>
                            <tab heading="Facturas Pagadas" index="5">
                                <div class=" row etiquetaTotales" ng-show="showCopadeFacturas == 1">Precio venta con IVA: <span class="totales">{{sumatoriaFacturasPagadas| currency: "$"}} </span></div>
                                <div class=" row etiquetaTotales" ng-show="showCopadeFacturas == 2">Precio Cotización con IVA: <span class="totales">{{sumatoriaPagadas| currency: "$"}} </span></div>
                                <br/>
                                <br/>
                                <br/>
                                <br/>
                                <div class="col-md-offset-10 col-md-2">
                                    <form role="form">
                                        <input bs-switch ng-model="isSelectedFactura" type="checkbox" switch-active="{{ isActive }}" switch-on-text="{{ onText }}"
                                            switch-off-text="{{ offText }}" switch-on-color="{{ onColor }}" switch-off-color="{{ offColor }}"
                                            switch-animate="{{ animate }}" switch-size="{{ size }}" switch-label="{{ label }}"
                                            switch-icon="{{ icon }}" switch-radio-off="{{ radioOff }}" switch-label-width="{{ labelWidth }}"
                                            switch-handle-width="{{ handleWidth }}" switch-wrapper="{{ wrapper }}" ng-true-value="'yep'"
                                            ng-false-value="'nope'" switch-inverse="{{ !inverse }}" ng-change="change_switchFacturas()">
                                    </form>
                                </div>

                                <br/>
                                <br/>
                                <div id="tabllas">
                                    <div class="row col-md-12 ">

                                        <div class="col-xs-3" id="data_5">
                                            <label class="font-noraml">Fecha Inicio a Fecha Fin</label>
                                            <div class="input-daterange input-group" id="datepicker">
                                                <input type="text" placeholder="Fecha Inicio" class="input-sm form-control" name="start" ng-model="fechaInicio" ng-change="fechaRango"
                                                    calendar/>
                                                <span class="input-group-addon">a</span>
                                                <input type="text" placeholder="Fecha Fin" class="input-sm form-control" name="end" ng-model="fechaFin" ng-change="fechaRango()"
                                                    calendar/>
                                            </div>
                                        </div>
                                        <div class="col-xs-2" id="fechaMes">
                                            <label class="font-noraml">Mes</label>
                                            <div class="input-group date">
                                                <input type="text" placeholder="Elija Mes" class="form-control" value="" ng-model="fechaMes" ng-change="fechaMess()" mes>
                                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                            </div>
                                        </div>
                                        <div class="col-xs-3">
                                            <label class="font-noraml">Zona</label>
                                            <select class="form-control m-b" id="zona" ng-model="zona" ng-options="zona.idZona as zona.descripcionZona for zona in zonas"
                                                ng-change="devuelveTars(zona)">
                                                <option value="">Seleccione una Zona</option>
                                            </select>
                                        </div>
                                        <div class="col-xs-3">
                                            <label class="font-noraml">Tar</label>
                                            <select ng-disabled="zona == null" class="form-control m-b" id="tar" ng-model="tar" ng-options="tar.idTAR as tar.nombreTar for tar in tars">
                                                <option value="">Seleccione una TAR</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="row col-md-12 ">
                                        <div class="col-md-4">
                                            <label class="font-noraml">Taller</label>
                                            <input type="text" placeholder="Buscar Taller" ng-model="proveedorFac" class="form-control">
                                        </div>
                                        <div class="col-xs-3">
                                            <label class="font-noraml">Tipo Orden</label>
                                            <select class="form-control" name="tipoCita" ng-model="idTipoCita">
                                                <option value="">Seleccione el Tipo de Orden</option>
                                                <option value="1">Servicio</option>
                                                <option value="2">Refacciones</option>
                                            </select>
                                        </div>
                                        <div class="col-xs-0">
                                            <label class="font-noraml">Buscar</label>
                                            <br>
                                            <button id="btnBuscar" busy="Buscando.." type="button" class="btn btn-primary" ng-click="buscaFiltros(fechaInicio, fechaFin, fechaMes, zona, tar, idTipoCita, proveedorFac)"><span class="glyphicon glyphicon-search"></span></button>
                                        </div>
                                    </div>


                                    <div class="row col-md-12 space">

                                        <div class="col-md-4">
                                            <input type="text" placeholder="Buscar Orden" ng-model="numeroTrabajo" class="form-control" ng-enter="ordenes(numeroTrabajo)">
                                        </div>

                                        <div class="col-md-2">
                                            <button id="btnBuscar" busy="Buscando.." type="button" class="btn btn-primary" ng-click="buscaOrden(numeroTrabajo)"><span class="glyphicon glyphicon-search"></span></button>
                                        </div>



                                    </div>

                                    <div class="table-responsive row col-md-12 space" ng-show="showCopadeFacturas == 1">
                                        <table class="table table-striped table-bordered table-hover dataTablePagadaCopade" cg-busy="{ promise:promise,message:message } ">
                                            <thead>
                                                <tr>
                                                    <th>Cliente</th>
                                                    <th>No. COPADE</th>
                                                    <th>Orden de Surtimiento</th>
                                                    <th>No. Estimación</th>
                                                    <th>Descripción de la Orden</th>
                                                    <th>Precio Venta sin IVA</th>
                                                    <th>Folio Factura</th>
                                                    <th>Precio Venta con IVA</th>
                                                    <th>Fecha COPADE</th>
                                                    <th ng-show="trabajosporCOPADE==1">Números de Órdenes</th>
                                                    <th ng-hide="userData.idTipoUsuario == 4">Acción</th>

                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="pagadaCopade in pagadasCopades">
                                                    <td>{{pagadaCopade.cliente}}</td>
                                                    <td>{{pagadaCopade.numeroCopade}}</td>
                                                    <td>{{pagadaCopade.folio}}</td>
                                                    <td>{{pagadaCopade.numeroEstimacion}}</td>
                                                    <td>{{pagadaCopade.descripcion}}</td>
                                                    <td>{{pagadaCopade.subTotal | currency}}</td>
                                                    <td>{{pagadaCopade.COP_IDDOCTO}}</td>
                                                    <td>{{pagadaCopade.total | currency}}</td>
                                                    <td>{{pagadaCopade.fechaRecepcionCopade | date:'dd-MM-yyyy'}}</td>
                                                    <td ng-show="trabajosporCOPADE==1">{{abono.numeroTrabajo}}</td>
                                                    <td ng-hide="userData.idTipoUsuario == 4">

                                                        <button class="btn btn-info" type="button" ng-click="verOrdenes(pagadaCopade.idDatosCopade)" data-toggle="tooltip" tooltip="Ver Factura"
                                                            tooltip-placement="left"><span class="glyphicon glyphicon-sunglasses"></span></button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <div class="table-responsive row col-md-12 space" ng-show="showCopadeFacturas == 2">
                                        <table class="table table-striped table-bordered table-hover dataTablePagadas" cg-busy="{promise:promise,message:message, minDuration: minDuration,delay:delay}">
                                            <thead>
                                                <tr>
                                                    <th>Cliente</th>
                                                    <th>No. COPADE</th>
                                                    <th>Orden de Surtimiento</th>
                                                    <th>Consecutivo</th>
                                                    <th>Número de la Orden</th>
                                                    <th>Número de Cotización</th>
                                                    <th>Taller</th>
                                                    <th>Factura Taller</th>
                                                    <th>Monto Factura Taller</th>
                                                    <th>Saldo Factura Taller</th>
                                                    <th>Número Económico</th>
                                                    <th>Zona</th>
                                                    <th>TAR</th>
                                                    <th>Tipo Orden</th>
                                                    <th>Orden de Surtimiento</th>
                                                    <th>Descripción de la Orden</th>
                                                    <th>Precio Cotización con IVA</th>
                                                    <th>Factura COPADE</th>
                                                    <th>Precio Copade con IVA</th>
                                                    <th>Fecha Ingreso Unidad</th>
                                                    <th>Fecha Inicio Trabajo</th>
                                                    <th>Fecha Fin Trabajo</th>
                                                    <th>Acción</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="pagada in pagadas">
                                                    <td>{{pagada.cliente}}</td>
                                                    <td>{{pagada.numeroCopade}}</td>
                                                    <td>{{pagada.folio}}</td>
                                                    <td>{{pagada.idCita}}</td>
                                                    <td>{{pagada.numeroTrabajo}}</td>
                                                    <td>{{pagada.numeroCotizacion}}</td>
                                                    <td>{{pagada.razonSocial}}</td>
                                                    <td>{{pagada.numFactura}}</td>
                                                    <td>{{pagada.total | currency}}</td>
                                                    <td>{{pagada.saldoProveedor | currency}}</td>
                                                    <td>{{pagada.numEconomico}}</td>
                                                    <td>{{pagada.zona}}</td>
                                                    <td>{{pagada.TAR}}</td>
                                                    <td>{{pagada.idTipoCita == 4 ? "Refacciones" : "Servicio"}}</td>
                                                    <td>{{pagada.folio}}</td>
                                                    <td>{{pagada.trabajo}}</td>
                                                    <td>{{pagada.precioCotizacion | currency}}</td>
                                                    <td>{{pagada.COP_IDDOCTO}}</td>
                                                    <td>{{pagada.COP_CARGO | currency}}</td>
                                                    <td>{{pagada.fechaIngresoUnidad | date:'dd-MM-yyyy HH:mm'}}</td>
                                                    <td>{{pagada.fechaInicio | date:'dd-MM-yyyy HH:mm'}}</td>
                                                    <td>{{pagada.fechaFin | date:'dd-MM-yyyy HH:mm'}}</td>
                                                    <td>

                                                        <div class="alerta">
                                                            <button class="dropdown-toggle alerta-form btn btn-info" tooltip="Ver órden de servicio" data-toggle="dropdown" href="#"
                                                                aria-expanded="true" ng-click="aprobarTrabajo(pagada, 1)">
                                                            <i class="glyphicon glyphicon-sunglasses"></i> 
                                                            </button>
                                                            <ul class="dropdown-menu dropdown-messages">
                                                            </ul>
                                                        </div>

                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>

                                    </div>

                                </div>
                            </tab>

                        </tabset>
                    </div>
                </div>
            </div>
        </div>