<link rel="stylesheet" href="AngularJS/Detalle/Styles/detalle.css">
<div ng-init="init()" class="animated bounceInRight">
    <div class="headTitleTallerCita">
        <span class="title title-xs"> Consulta Unidad</span>
    </div>
    <div class="wrapper wrapper-content">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-content">
                        <div class="col-xs-12 col-sm-5 col-md-4 col-lg-3">
                            <h3>Orden: <span class="text-orden">{{numeroOrden}} </span></h3>
                        </div>
                        <!-- <div>
                            <h3>
                                <span class="text-orden">XXXXXXXXXXXXX </span>
                            </h3>
                        </div> -->
                        <div class="col-xs-12 col-sm-7 col-md-8 col-lg-9">
                            <h3><span class="label label-primary mayusculas">Proceso</span></h3>
                        </div>
                        <div class="col-xs-12 col-sm-12">
                            <div class="hr-line-dashed"></div>
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <div class="progressPrincipal">
                                <div>
                                    <div class="subProgress">
                                        <div class="subProgressBarra" style="width: 25%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="subProgress">
                                        <div class="subProgressBarra" style="width: 55%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="subProgress">
                                        <div class="subProgressBarra" style="width: 85%"></div>
                                    </div>
                                </div>
                                <div class="progressBarra">
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-12">
                            <div class="hr-line-dashed"></div>
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <h5>Detalle de la orden / cotización</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <p>
                                            <label>Descripción de la Orden:</label>
                                            <span>{{detalleOrden.comentarioOrden}}</span>
                                        </p>
                                        <p>
                                            <label>Número Economico: </label>
                                            <span>{{detalleOrden.numeroEconomico}}</span>
                                        </p>
                                        <p>
                                            <label>Marca-Modelo: </label>
                                            <span>{{detalleOrden.marca}}</span>
                                        </p>
                                        <p>
                                            <label>Zona:</label>
                                            <span>Centro</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <h5>Detalle del Cliente</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <p>
                                            <label>Cliente:</label>
                                            <span>{{detalleCliente.nombreComercial}}</span>
                                        </p>
                                        <p>
                                            <label>Dirección:</label>
                                            <span>{{detalleCliente.direccion}}</span>
                                        </p>
                                        <p>
                                            <label>Teléfono: </label>
                                            <span>{{detalleCliente.telefono}}</span>
                                        </p>
                                        <h3>Presupuesto</h3>
                                        <p>
                                            <label>Saldo Disponible: </label>
                                            <span ng-class="{sinPresupuesto : SaldoReal < GranTotal}">{{20| currency:"$": 2}}</span>
                                        </p>
                                        <p>
                                            <label>Saldo Real: </label>
                                            <span ng-class="{sinPresupuesto : SaldoReal < GranTotal}">{{10| currency:"$": 2}}</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="hr-line-dashed"></div>
                        </div>

                        <!-- Eidencias por orden -->
                        <div class="col-sm-12 col-md-6 col-lg-6">
                            <h3>Catálogo de Evidencias</h3>
                            <div class="carousel slide" id="carousel1">
                                <div class="carousel-inner">
                                    <div class="item active">
                                        <img alt="image" class="img-responsive" src="image/mapa.jpg">
                                    </div>
                                    <div class="item">
                                        <img alt="image" class="img-responsive" src="image/pemex_logo.png">
                                    </div>
                                    <div class="item ">
                                        <img alt="image" class="img-responsive" src="image/firma.png">
                                    </div>
                                </div>
                                <a data-slide="prev" href="#carousel1" class="left carousel-control">
                                    <span class="icon-prev"></span>
                                </a>
                                <a data-slide="next" href="#carousel1" class="right carousel-control">
                                    <span class="icon-next"></span>
                                </a>
                            </div>
                        </div>

                        <!-- Documentos por orden -->
                        <div class="col-sm-12 col-md-6 col-lg-6">
                            <h3>Documentación de la Orden</h3>
                            <div class="m-t-xl">
                                <div class="col-sm-3 col-md-3 col-lg-3 text-center">
                                    <label>Recepción</label>
                                    <br>
                                    <button class="btn btn-archivo  btn-large-dim btn-outline m-t-md" type="button"><i class="fa fa-file-pdf-o"></i></button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 text-center">
                                    <label>Conformidad</label>
                                    <br>
                                    <button class="btn btn-archivo  btn-large-dim btn-outline m-t-md" type="button"><i class="fa fa-file-pdf-o"></i></button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 text-center">
                                    <label>Factura</label>
                                    <br>
                                    <button class="btn btn-archivo  btn-large-dim btn-outline m-t-md" type="button"><i class="fa fa-file-pdf-o"></i></button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 text-center">
                                    <label>COPADE</label>
                                    <br>
                                    <button class="btn btn-archivo  btn-large-dim btn-outline m-t-md" type="button"><i class="fa fa-file-pdf-o"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="hr-line-dashed"></div>
                        </div>

                        <!--Ordenes en Aprobación-->
                          <div class="scroll_content col-xs-12 col-md-12 col-sm-12 col-lg-12 smallerFont">
                              <!--Costos totales de las  cotizaciones-->
                              <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12" ng-show="orden.IdTipoOrden = 2">
                                  <table class="table invoice-total">
                                      <tbody>
                                          <tr>
                                              <td><strong>SUBTOTAL :</strong></td>
                                              <td>{{ vistaPrecio == 1 ? sumaPrecioTotal : sumaPrecioTotalCliente | currency}}</td>
                                          </tr>
                                          <tr>
                                              <td><strong>I.V.A :</strong></td>
                                              <td>{{ vistaPrecio == 1 ? sumaIvaTotal : sumaIvaTotalCliente | currency}}</td>
                                          </tr>
                                          <tr>
                                              <td><strong>TOTAL :</strong></td>
                                              <td>{{ vistaPrecio == 1 ? sumaGranTotal : sumaGranTotalCliente | currency}}</td>
                                          </tr>
                                      </tbody>
                                  </table>
                              </div>
                              <!--Cotizaciones Servicios-->
                              <!--<div class="row" ng-show="orden.idTipoOrden = 2" ng-repeat="">
                                  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelCotizaciones">
                                    <div class="panel panel-default">
                                      <div class="panel-body">
                                        <div class="pestania" >
                                              <h3>XXXXXXXXXXXXXXXXXX</h3>
                                        </div>
                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"></div>
                                        <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
                                            <h4>Detalle de la Cotización</h4>
                                            <address>
                                                Estatus: <strong>{{descripcion}}</strong><br>
                                                Descripción de la Cotización: <strong>{{descripcion}}</strong>
                                            </address>
                                        </div>
                                        <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2"></div>
                                        <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
                                            <h4>Detalle de Proveedor</h4>
                                            <address>
                                              Taller: <strong>{{unidadInfo.razonSocial}}</strong><br>
                                              Dirección: <strong>{{unidadInfo.direccion[1]}}</strong><br>
                                              Zona: <strong>{{unidadInfo.GAR[0]}}</strong>
                                            </address>
                                        </div>
                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                            <button class="btn btn-default pull-right" ng-click="isSelectedChange('nope')">Venta</button>
                                            <button class="btn btn-success pull-right" ng-click="isSelectedChange('yep')">Costo</button>
                                        </div>
                                        <br>
                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                          <div class="table-responsive m-t">
                                              <table class="table invoice-table">
                                                  <thead>
                                                      <tr>
                                                          <th>No. Cotización</th>
                                                          <th style="text-align:left;">Estatus</th>
                                                          <th style="text-align:left;">Artículos</th>
                                                          <th>Cantidad</th>
                                                          <th>Precio Unitario</th>
                                                          <th>I.V.A</th>
                                                          <th>Precio Total</th>
                                                          <th>Aprobó</th>
                                                          <th>Seleccionar</th>
                                                      </tr>
                                                  </thead>
                                                  <tbody>
                                                      <tr ng-repeat="articulo in articulos" ng-class="{'rowVerde': articulo.idNivelAutorizacion==1, 'rowAzul': articulo.idNivelAutorizacion == 2, 'rowAmarillo' : articulo.idNivelAutorizacion == 3, 'rowRojo': articulo.idNivelAutorizacion == 4, 'rowEtGlobal': articulo.idNivelAutorizacion == 5}">
                                                          <td>{{articulo.numeroCotizacion}}</td>
                                                          <td style="text-align:left; width: 100px;">{{articulo.descripcionLarga}}</td>
                                                          <td style="text-align:left;  width:300px;">
                                                              <div><strong>Número de Partida: {{ articulo.numeroPartida }}</strong></div>
                                                              <small>{{articulo.item}}</small></td>
                                                          <td>{{articulo.cantidad}}</td>
                                                          <td>{{ vistaPrecio == 1 ? articulo.precio : articulo.precioCliente | currency }}</td>
                                                          <td>{{ vistaPrecio == 1 ? (articulo.cantidad * (articulo.precio * (articulo.valorIva / 100))) : (articulo.cantidad * (articulo.precioCliente * (articulo.valorIva / 100))) | currency }}</td>
                                                          <td>{{ vistaPrecio == 1 ? ((articulo.cantidad * articulo.precio) + (articulo.cantidad * (articulo.precio * (articulo.valorIva / 100)))) : ((articulo.cantidad * articulo.precioCliente) + (articulo.cantidad * (articulo.precioCliente * (articulo.valorIva / 100)))) | currency }}</td>
                                                          <td>Nombre DD/MM/AAAA 00:00</td>
                                                          <td style="text-align:center;">
                                                              <form action="" ng-show="articulo.idEstatus == 8">
                                                                  <div class="checkbox">
                                                                      <input type="checkbox" name="autorizar" id="autorizar" ng-click="" ng-hide="userData.idTipoUsuario == 3" data-toggle="tooltip" tooltip="Autorizar" tooltip-placement="center" ng-disabled="userData.idUsuario != articulo.UsuarioAutorizador">
                                                                      <label></label>
                                                                  </div>
                                                              </form>
                                                              <div ng-show="articulo.idEstatus == 9">Autorizado</div>
                                                              <div ng-show="articulo.idEstatus == 10">Rechazado</div>
                                                          </td>
                                                      </tr>
                                                  </tbody>
                                              </table>
                                          </div>
                                          <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
                                              <table class="table invoice-total">
                                                  <tbody>
                                                      <tr>
                                                          <td><strong>SUBTOTAL :</strong></td>
                                                          <td>{{ vistaPrecio == 1 ? sumaPrecioTotal : sumaPrecioTotalCliente | currency}}</td>
                                                      </tr>
                                                      <tr>
                                                          <td><strong>I.V.A :</strong></td>
                                                          <td>{{ vistaPrecio == 1 ? sumaIvaTotal : sumaIvaTotalCliente | currency}}</td>
                                                      </tr>
                                                      <tr>
                                                          <td><strong>TOTAL :</strong></td>
                                                          <td>{{ vistaPrecio == 1 ? sumaGranTotal : sumaGranTotalCliente | currency}}</td>
                                                      </tr>
                                                  </tbody>
                                              </table>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                              </div> -->

                              <!--Cotizaciones Grua-->
                              <div class="row" ng-show="orden.idTipoOrden = 1">
                                  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 panelCotizaciones">
                                    <div class="panel panel-default">
                                      <div class="panel-body">
                                        <div class="pestania" >
                                              <h3>XXXXXXXXXXXXXXXXXX</h3>
                                        </div>
                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"></div>
                                        <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
                                            <h4>Detalle de la Cotización</h4>
                                            <address>
                                                Estatus: <strong>{{descripcion}}</strong><br>
                                                Descripción de la Cotización: <strong>{{descripcion}}</strong>
                                            </address>
                                        </div>
                                        <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2"></div>
                                        <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
                                            <h4>Detalle de Proveedor</h4>
                                            <address>
                                              Taller: <strong>{{unidadInfo.razonSocial}}</strong><br>
                                              Dirección: <strong>{{unidadInfo.direccion[1]}}</strong><br>
                                              Zona: <strong>{{unidadInfo.GAR[0]}}</strong>
                                            </address>
                                        </div>
                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                            <button class="btn btn-default pull-right" ng-click="isSelectedChange('nope')">Venta</button>
                                            <button class="btn btn-success pull-right" ng-click="isSelectedChange('yep')">Costo</button>
                                        </div>
                                        <br>
                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                          <div class="table-responsive m-t">
                                              <table class="table invoice-table">
                                                  <thead>
                                                      <tr>
                                                          <th>No. Cotización</th>
                                                          <th style="text-align:left;">Estatus</th>
                                                          <th style="text-align:left;">Artículos</th>
                                                          <th>Cantidad</th>
                                                          <th>Precio Unitario</th>
                                                          <th>I.V.A</th>
                                                          <th>Precio Total</th>
                                                          <th>Aprobó</th>
                                                          <th>Seleccionar</th>
                                                      </tr>
                                                  </thead>
                                                  <tbody>
                                                      <tr ng-repeat="articulo in articulos" ng-class="{'rowVerde': articulo.idNivelAutorizacion==1, 'rowAzul': articulo.idNivelAutorizacion == 2, 'rowAmarillo' : articulo.idNivelAutorizacion == 3, 'rowRojo': articulo.idNivelAutorizacion == 4, 'rowEtGlobal': articulo.idNivelAutorizacion == 5}">
                                                          <td>{{articulo.numeroCotizacion}}</td>
                                                          <td style="text-align:left; width: 100px;">{{articulo.descripcionLarga}}</td>
                                                          <td style="text-align:left;  width:300px;">
                                                              <div><strong>Número de Partida: {{ articulo.numeroPartida }}</strong></div>
                                                              <small>{{articulo.item}}</small></td>
                                                          <td>{{articulo.cantidad}}</td>
                                                          <td>{{ vistaPrecio == 1 ? articulo.precio : articulo.precioCliente | currency }}</td>
                                                          <td>{{ vistaPrecio == 1 ? (articulo.cantidad * (articulo.precio * (articulo.valorIva / 100))) : (articulo.cantidad * (articulo.precioCliente * (articulo.valorIva / 100))) | currency }}</td>
                                                          <td>{{ vistaPrecio == 1 ? ((articulo.cantidad * articulo.precio) + (articulo.cantidad * (articulo.precio * (articulo.valorIva / 100)))) : ((articulo.cantidad * articulo.precioCliente) + (articulo.cantidad * (articulo.precioCliente * (articulo.valorIva / 100)))) | currency }}</td>
                                                          <td>Nombre DD/MM/AAAA 00:00</td>
                                                          <td style="text-align:center;">
                                                              <form action="" ng-show="articulo.idEstatus == 8">
                                                                  <div class="checkbox">
                                                                      <input type="checkbox" name="autorizar" id="autorizar" ng-click="" ng-hide="userData.idTipoUsuario == 3" data-toggle="tooltip" tooltip="Autorizar" tooltip-placement="center" ng-disabled="userData.idUsuario != articulo.UsuarioAutorizador">
                                                                      <label></label>
                                                                  </div>
                                                              </form>
                                                              <div ng-show="articulo.idEstatus == 9">Autorizado</div>
                                                              <div ng-show="articulo.idEstatus == 10">Rechazado</div>
                                                          </td>
                                                      </tr>
                                                  </tbody>
                                              </table>
                                          </div>
                                          <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
                                              <table class="table invoice-total">
                                                  <tbody>
                                                      <tr>
                                                          <td><strong>SUBTOTAL :</strong></td>
                                                          <td>{{ vistaPrecio == 1 ? sumaPrecioTotal : sumaPrecioTotalCliente | currency}}</td>
                                                      </tr>
                                                      <tr>
                                                          <td><strong>I.V.A :</strong></td>
                                                          <td>{{ vistaPrecio == 1 ? sumaIvaTotal : sumaIvaTotalCliente | currency}}</td>
                                                      </tr>
                                                      <tr>
                                                          <td><strong>TOTAL :</strong></td>
                                                          <td>{{ vistaPrecio == 1 ? sumaGranTotal : sumaGranTotalCliente | currency}}</td>
                                                      </tr>
                                                  </tbody>
                                              </table>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                              </div>
                          </div>

                        <!-- Notas -->
                        <div class="col-sm-12 col-md-6 col-lg-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    Notas
                                </div>
                                <div class="panel-body">
                                    <div class="col-sm-12 col-md-12 col-lg-12">
                                        <div class="my-scroll-nota">
                                            <div class="chat-activity-list">
                                                <div ng-repeat="notas in notaTrabajo">
                                                    <div class="chat-element">
                                                        <a href="#" ng-class="notas.idUsuario === userData.idUsuario ? 'pull-left' : 'pull-right'">
                                                            <img alt="image" class="img-circle" src="image/profile/man2.jpg">
                                                        </a>
                                                        <div class="media-body">
                                                            <small ng-class="notas.idUsuario === userData.idUsuario ? 'pull-right' : 'pull-left'">{{notas.tiempoTranscurrido}}</small>
                                                            <div ng-class="notas.idUsuario === userData.idUsuario ? 'pull-left' : 'pull-right'">
                                                                <strong>{{notas.nombreCompleto}}</strong>
                                                                <p class="m-b-xs">
                                                                    {{notas.texto}}
                                                                </p>
                                                                <small class="text-muted">{{notas.fecha |  date:'medium'}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="chat-form">
                                            <form role="form">
                                                <div class="form-group">
                                                    <textarea class="form-control nota-input" placeholder="Escriba una nota" ng-model="texto"></textarea>
                                                </div>
                                                <div class="text-right">
                                                    <button type="submit" class="btn btn-sm btn-primary m-t-n-xs" ng-click="enviaNota()">Enviar Nota</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Acciones -->
                        <div class="col-sm-12 col-md-6 col-lg-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    Plan de Acción
                                </div>
                                <div class="panel-body">
                                    <div class="col-sm-12 col-md-12 col-lg-12">
                                        <form role="form">
                                            <div class="col-sm-3 col-md-3 col-lg-3">
                                                <label>Plan</label>
                                            </div>
                                            <div class="col-sm-9 col-md-9 col-lg-9">
                                                <input type="text" class="form-control">
                                            </div>
                                            <div class="col-sm-3 col-md-3 col-lg-3 m-t">
                                                <label>Fecha</label>
                                            </div>
                                            <div class="col-sm-5 col-md-5 col-lg-5 m-t">
                                                <div class="input-group date">
                                                    <input type="text" class="form-control" value="" ng-model="datosCita.fechaCita" ng-change="validaHoraCita()">
                                                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                </div>
                                            </div>
                                            <div class="col-sm-4 col-md-4 col-lg-4 m-t">
                                                <button class="btn btn-sm btn-primary pull-right">Agregar</button>
                                            </div>
                                            <div class="col-sm-3 col-md-3 col-lg-3 m-t">
                                                <label>Recordatorio</label>
                                            </div>
                                            <div class="col-sm-5 col-md-5 col-lg-5 m-t">
                                                <select class="form-control"></select>
                                            </div>
                                            <div class="col-sm-4 col-md-4 col-lg-4 m-t">
                                                <button class="btn btn-sm btn-primary pull-right">Agregar</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Botones -->
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <button class="btn btn-success pull-right btn-movil" type="submit"> Editar</button>
                            <button class="btn btn-primary pull-right btn-movil" ng-class="{Inactivo : SaldoReal < GranTotal}" type="submit"> Guarda Cotizacion</button>
                            <button class="btn btn-success pull-right btn-movil" type="submit">Nueva Cotización</button>
                            <button class="btn btn-primary pull-right btn-movil" type="submit">Editar Cotización</button>
                            <button class="btn btn-info pull-right btn-movil" type="submit">Comprobante de Recepción</button>
                            <button class="btn btn-warning pull-right  btn-movil" type="submit">Editar Cita</button>
                            <button class="btn btn-rojo pull-right  btn-movil" type="submit">Cancelar Cita</button>
                            <button class="btn btn-negro pull-right  btn-movil" type="submit">Negro</button>
                            <button class="btn btn-morado pull-right  btn-movil" type="submit">Morado</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



 <script>
    $(document).ready(function () {
        $('.scroll_content').slimscroll({
            height: '300px',
            width: '100%'
        })
    });

</script>
